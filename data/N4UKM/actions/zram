SWAP=/dev/block/zram0;
RESET=/sys/devices/virtual/block/zram0/reset;
ZRAM=$2;

if [ -f $1 ]; then
	if [[ ! -z $2 ]]; then
	
		swapoff $SWAP > /dev/null 2>&1;
		echo "1" > $RESET;
		
		if [ $ZRAM -gt 0 ]; then
			echo $((ZRAM * 1024 * 1024)) > $1
			mkswap $SWAP > /dev/null 2>&1;
			swapon $SWAP > /dev/null 2>&1;
		fi
		
	fi
	
	ZRAM=`cat $1`
	echo $((ZRAM / 1024 / 1024))
else
	echo "0"
fi;
